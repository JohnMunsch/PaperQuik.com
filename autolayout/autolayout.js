!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.autolayout=e():t.autolayout=e()}(this,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"},n={LEQ:"leq",EQU:"equ",GEQ:"geq"},o={REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250},a=function(){function t(t,e,r,i,n,o){this.message=t,this.expected=e,this.found=r,this.offset=i,this.line=n,this.column=o,this.name="SyntaxError"}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),{SyntaxError:t,parse:function(e){var r,i=arguments.length>1?arguments[1]:{},n={},o={visualFormatString:At},a=At,s=n,c=null,u=":",l={type:"literal",value:":",description:'":"'},h=function(t,e,r,i,n){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat([r],[].concat.apply([],i),n||[])}},p="H",f={type:"literal",value:"H",description:'"H"'},d="V",v={type:"literal",value:"V",description:'"V"'},y=function(t){return"H"==t?"horizontal":"vertical"},_="|",g={type:"literal",value:"|",description:'"|"'},m=function(){return{view:null}},w="[",A={type:"literal",value:"[",description:'"["'},b="]",E={type:"literal",value:"]",description:'"]"'},I=function(t,e){return St(t,e?{constraints:e}:{})},C="-",x={type:"literal",value:"-",description:'"-"'},T=function(t){return t},V=function(){return[{relation:"equ",constant:"default",$parserOffset:_t()}]},S="",H=function(){return[{relation:"equ",constant:0,$parserOffset:_t()}]},O=function(t){return[{relation:"equ",constant:t,$parserOffset:_t()}]},k="(",M={type:"literal",value:"(",description:'"("'},R=",",z={type:"literal",value:",",description:'","'},F=")",D={type:"literal",value:")",description:'")"'},L=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},N="@",q={type:"literal",value:"@",description:'"@"'},Z=function(t,e,r){return St({relation:"equ"},t||{},e,r?r[1]:{})},j="==",G={type:"literal",value:"==",description:'"=="'},X=function(){return{relation:"equ",$parserOffset:_t()}},W="<=",P={type:"literal",value:"<=",description:'"<="'},U=function(){return{relation:"leq",$parserOffset:_t()}},Q=">=",B={type:"literal",value:">=",description:'">="'},$=function(){return{relation:"geq",$parserOffset:_t()}},Y=/^[0-9]/,J={type:"class",value:"[0-9]",description:"[0-9]"},K=function(t){return{priority:parseInt(t.join(""),10)}},tt=function(t){return{constant:t}},et=/^[a-zA-Z_]/,rt={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},it=/^[a-zA-Z0-9_]/,nt={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ot=function(t,e){return{view:t+e}},at=".",st={type:"literal",value:".",description:'"."'},ct=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},ut=function(t){return parseInt(t.join(""),10)},lt=0,ht=0,pt=0,ft={line:1,column:1,seenCR:!1},dt=0,vt=[],yt=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function _t(){return ht}function gt(t){return pt!==t&&(pt>t&&(pt=0,ft={line:1,column:1,seenCR:!1}),function(t,r,i){var n,o;for(n=r;n<i;n++)"\n"===(o=e.charAt(n))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(ft,pt,t),pt=t),ft}function mt(t){lt<dt||(lt>dt&&(dt=lt,vt=[]),vt.push(t))}function wt(r,i,n){var o=gt(n),a=n<e.length?e.charAt(n):null;return null!==i&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(i),new t(null!==r?r:function(t,e){var r,i=new Array(t.length);for(r=0;r<t.length;r++)i[r]=t[r].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(i,a),i,a,n,o.line,o.column)}function At(){var t,r,i,o,a,_,g,m;if(t=lt,r=lt,(i=function(){var t,r;return t=lt,72===e.charCodeAt(lt)?(r=p,lt++):(r=n,0===yt&&mt(f)),r===n&&(86===e.charCodeAt(lt)?(r=d,lt++):(r=n,0===yt&&mt(v))),r!==n&&(ht=t,r=y(r)),t=r}())!==n?(58===e.charCodeAt(lt)?(o=u,lt++):(o=n,0===yt&&mt(l)),o!==n?r=i=[i,o]:(lt=r,r=s)):(lt=r,r=s),r===n&&(r=c),r!==n)if(i=lt,(o=bt())!==n&&(a=It())!==n?i=o=[o,a]:(lt=i,i=s),i===n&&(i=c),i!==n)if((o=Et())!==n){for(a=[],_=lt,(g=It())!==n&&(m=Et())!==n?_=g=[g,m]:(lt=_,_=s);_!==n;)a.push(_),_=lt,(g=It())!==n&&(m=Et())!==n?_=g=[g,m]:(lt=_,_=s);a!==n?(_=lt,(g=It())!==n&&(m=bt())!==n?_=g=[g,m]:(lt=_,_=s),_===n&&(_=c),_!==n?(ht=t,t=r=h(r,i,o,a,_)):(lt=t,t=s)):(lt=t,t=s)}else lt=t,t=s;else lt=t,t=s;else lt=t,t=s;return t}function bt(){var t,r;return t=lt,124===e.charCodeAt(lt)?(r=_,lt++):(r=n,0===yt&&mt(g)),r!==n&&(ht=t,r=m()),t=r}function Et(){var t,r,i,o,a;return t=lt,91===e.charCodeAt(lt)?(r=w,lt++):(r=n,0===yt&&mt(A)),r!==n&&(i=Tt())!==n?((o=Ct())===n&&(o=c),o!==n?(93===e.charCodeAt(lt)?(a=b,lt++):(a=n,0===yt&&mt(E)),a!==n?(ht=t,t=r=I(i,o)):(lt=t,t=s)):(lt=t,t=s)):(lt=t,t=s),t}function It(){var t,r,i,o;return t=lt,45===e.charCodeAt(lt)?(r=C,lt++):(r=n,0===yt&&mt(x)),r!==n&&(i=function(){var t;return(t=function(){var t,e;return t=lt,(e=Vt())!==n&&(ht=t,e=O(e)),t=e}())===n&&(t=Ct()),t}())!==n?(45===e.charCodeAt(lt)?(o=C,lt++):(o=n,0===yt&&mt(x)),o!==n?(ht=t,t=r=T(i)):(lt=t,t=s)):(lt=t,t=s),t===n&&(t=lt,45===e.charCodeAt(lt)?(r=C,lt++):(r=n,0===yt&&mt(x)),r!==n&&(ht=t,r=V()),(t=r)===n&&(t=lt,(r=S)!==n&&(ht=t,r=H()),t=r)),t}function Ct(){var t,r,i,o,a,c,u;if(t=lt,40===e.charCodeAt(lt)?(r=k,lt++):(r=n,0===yt&&mt(M)),r!==n)if((i=xt())!==n){for(o=[],a=lt,44===e.charCodeAt(lt)?(c=R,lt++):(c=n,0===yt&&mt(z)),c!==n&&(u=xt())!==n?a=c=[c,u]:(lt=a,a=s);a!==n;)o.push(a),a=lt,44===e.charCodeAt(lt)?(c=R,lt++):(c=n,0===yt&&mt(z)),c!==n&&(u=xt())!==n?a=c=[c,u]:(lt=a,a=s);o!==n?(41===e.charCodeAt(lt)?(a=F,lt++):(a=n,0===yt&&mt(D)),a!==n?(ht=t,t=r=L(i,o)):(lt=t,t=s)):(lt=t,t=s)}else lt=t,t=s;else lt=t,t=s;return t}function xt(){var t,r,i,o,a,u;return t=lt,(r=function(){var t,r;return t=lt,e.substr(lt,2)===j?(r=j,lt+=2):(r=n,0===yt&&mt(G)),r!==n&&(ht=t,r=X()),(t=r)===n&&(t=lt,e.substr(lt,2)===W?(r=W,lt+=2):(r=n,0===yt&&mt(P)),r!==n&&(ht=t,r=U()),(t=r)===n&&(t=lt,e.substr(lt,2)===Q?(r=Q,lt+=2):(r=n,0===yt&&mt(B)),r!==n&&(ht=t,r=$()),t=r)),t}())===n&&(r=c),r!==n&&(i=function(){var t;return(t=function(){var t,e;return t=lt,(e=Vt())!==n&&(ht=t,e=tt(e)),t=e}())===n&&(t=Tt()),t}())!==n?(o=lt,64===e.charCodeAt(lt)?(a=N,lt++):(a=n,0===yt&&mt(q)),a!==n&&(u=function(){var t,r,i;if(t=lt,r=[],Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J)),i!==n)for(;i!==n;)r.push(i),Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J));else r=s;return r!==n&&(ht=t,r=K(r)),t=r}())!==n?o=a=[a,u]:(lt=o,o=s),o===n&&(o=c),o!==n?(ht=t,t=r=Z(r,i,o)):(lt=t,t=s)):(lt=t,t=s),t}function Tt(){var t,r,i,o,a;if(t=lt,r=lt,i=[],et.test(e.charAt(lt))?(o=e.charAt(lt),lt++):(o=n,0===yt&&mt(rt)),o!==n)for(;o!==n;)i.push(o),et.test(e.charAt(lt))?(o=e.charAt(lt),lt++):(o=n,0===yt&&mt(rt));else i=s;if(i!==n&&(i=e.substring(r,lt)),(r=i)!==n){for(i=lt,o=[],it.test(e.charAt(lt))?(a=e.charAt(lt),lt++):(a=n,0===yt&&mt(nt));a!==n;)o.push(a),it.test(e.charAt(lt))?(a=e.charAt(lt),lt++):(a=n,0===yt&&mt(nt));o!==n&&(o=e.substring(i,lt)),(i=o)!==n?(ht=t,t=r=ot(r,i)):(lt=t,t=s)}else lt=t,t=s;return t}function Vt(){var t,r,i,o,a;if(t=lt,r=[],Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J)),i!==n)for(;i!==n;)r.push(i),Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J));else r=s;if(r!==n)if(46===e.charCodeAt(lt)?(i=at,lt++):(i=n,0===yt&&mt(st)),i!==n){if(o=[],Y.test(e.charAt(lt))?(a=e.charAt(lt),lt++):(a=n,0===yt&&mt(J)),a!==n)for(;a!==n;)o.push(a),Y.test(e.charAt(lt))?(a=e.charAt(lt),lt++):(a=n,0===yt&&mt(J));else o=s;o!==n?(ht=t,t=r=ct(r,o)):(lt=t,t=s)}else lt=t,t=s;else lt=t,t=s;if(t===n){if(t=lt,r=[],Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J)),i!==n)for(;i!==n;)r.push(i),Y.test(e.charAt(lt))?(i=e.charAt(lt),lt++):(i=n,0===yt&&mt(J));else r=s;r!==n&&(ht=t,r=ut(r)),t=r}return t}function St(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}if((r=a())!==n&&lt===e.length)return r;throw r!==n&&lt<e.length&&mt({type:"end",description:"end of input"}),wt(null,vt,dt)}}}(),s=function(){function t(t,e,r,i,n,o){this.message=t,this.expected=e,this.found=r,this.offset=i,this.line=n,this.column=o,this.name="SyntaxError"}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),{SyntaxError:t,parse:function(e){var r,i=arguments.length>1?arguments[1]:{},n={},o={visualFormatStringExt:We},a=We,s=n,c="C:",u={type:"literal",value:"C:",description:'"C:"'},l=null,h=function(t,e,r,i){return{type:"attribute",view:t.view,attributes:[e].concat(r)}},p=function(t,e){return{attr:t,predicates:e}},f=":",d={type:"literal",value:":",description:'":"'},v=function(t,e,r,i,n,o){return{type:"vfl",orientation:t?t[0]:"horizontal",cascade:(e||[]).concat(r,[].concat.apply([],i),n||[])}},y="HV",_={type:"literal",value:"HV",description:'"HV"'},g=function(){return"horzvert"},m="H",w={type:"literal",value:"H",description:'"H"'},A=function(){return"horizontal"},b="V",E={type:"literal",value:"V",description:'"V"'},I=function(){return"vertical"},C="Z",x={type:"literal",value:"Z",description:'"Z"'},T=function(){return"zIndex"},V=" ",S={type:"literal",value:" ",description:'" "'},H="//",O={type:"literal",value:"//",description:'"//"'},k={type:"any",description:"any character"},M="|",R={type:"literal",value:"|",description:'"|"'},z=function(){return{view:null}},F="[",D={type:"literal",value:"[",description:'"["'},L=",",N={type:"literal",value:",",description:'","'},q="]",Z={type:"literal",value:"]",description:'"]"'},j=function(t,e){return e.length?[t].concat([].concat.apply([],e)):t},G=function(t,e,r){return cr(cr(t,e?{constraints:e}:{}),r?{cascade:r}:{})},X=function(t,e){return[].concat([].concat.apply([],t),[e])},W="->",P={type:"literal",value:"->",description:'"->"'},U=function(){return[{relation:"none"}]},Q="-",B={type:"literal",value:"-",description:'"-"'},$=function(t){return t},Y=function(){return[{relation:"equ",constant:"default"}]},J="~",K={type:"literal",value:"~",description:'"~"'},tt=function(){return[{relation:"equ",equalSpacing:!0}]},et="",rt=function(){return[{relation:"equ",constant:0}]},it=function(t){return[{relation:"equ",multiplier:t.multiplier}]},nt=function(t){return[{relation:"equ",constant:t}]},ot="(",at={type:"literal",value:"(",description:'"("'},st=")",ct={type:"literal",value:")",description:'")"'},ut=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},lt="@",ht={type:"literal",value:"@",description:'"@"'},pt=function(t,e,r){return cr({relation:"equ"},t||{},e,r?r[1]:{})},ft=function(t,e,r){return cr({relation:"equ",equalSpacing:!0},t||{},e,r?r[1]:{})},dt="==",vt={type:"literal",value:"==",description:'"=="'},yt=function(){return{relation:"equ"}},_t="<=",gt={type:"literal",value:"<=",description:'"<="'},mt=function(){return{relation:"leq"}},wt=">=",At={type:"literal",value:">=",description:'">="'},bt=function(){return{relation:"geq"}},Et=/^[0-9]/,It={type:"class",value:"[0-9]",description:"[0-9]"},Ct=function(t){return{priority:parseInt(t.join(""),10)}},xt=function(t){return{constant:t}},Tt=function(t){return{constant:-t}},Vt="+",St={type:"literal",value:"+",description:'"+"'},Ht="%",Ot={type:"literal",value:"%",description:'"%"'},kt=function(t){return{view:null,multiplier:t/100}},Mt=function(t){return{view:null,multiplier:t/-100}},Rt=function(t,e,r,i){return{view:t.view,attribute:e||void 0,multiplier:r||1,constant:i||void 0}},zt=".left",Ft={type:"literal",value:".left",description:'".left"'},Dt=function(){return"left"},Lt=".right",Nt={type:"literal",value:".right",description:'".right"'},qt=function(){return"right"},Zt=".top",jt={type:"literal",value:".top",description:'".top"'},Gt=function(){return"top"},Xt=".bottom",Wt={type:"literal",value:".bottom",description:'".bottom"'},Pt=function(){return"bottom"},Ut=".width",Qt={type:"literal",value:".width",description:'".width"'},Bt=function(){return"width"},$t=".height",Yt={type:"literal",value:".height",description:'".height"'},Jt=function(){return"height"},Kt=".centerX",te={type:"literal",value:".centerX",description:'".centerX"'},ee=function(){return"centerX"},re=".centerY",ie={type:"literal",value:".centerY",description:'".centerY"'},ne=function(){return"centerY"},oe="/",ae={type:"literal",value:"/",description:'"/"'},se=function(t){return 1/t},ce="/+",ue={type:"literal",value:"/+",description:'"/+"'},le="/-",he={type:"literal",value:"/-",description:'"/-"'},pe=function(t){return-1/t},fe="*",de={type:"literal",value:"*",description:'"*"'},ve=function(t){return t},ye="*+",_e={type:"literal",value:"*+",description:'"*+"'},ge="*-",me={type:"literal",value:"*-",description:'"*-"'},we=function(t){return-t},Ae=/^[a-zA-Z_]/,be={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Ee=/^[a-zA-Z0-9_]/,Ie={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Ce=function(t,e,r){return{view:t+e,range:r,$parserOffset:Ze()}},xe=function(t,e){return{view:t+e,$parserOffset:Ze()}},Te="..",Ve={type:"literal",value:"..",description:'".."'},Se=function(t){return parseInt(t)},He=".",Oe={type:"literal",value:".",description:'"."'},ke=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},Me=function(t){return parseInt(t.join(""),10)},Re=0,ze=0,Fe=0,De={line:1,column:1,seenCR:!1},Le=0,Ne=[],qe=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function Ze(){return ze}function je(t){return Fe!==t&&(Fe>t&&(Fe=0,De={line:1,column:1,seenCR:!1}),function(t,r,i){var n,o;for(n=r;n<i;n++)"\n"===(o=e.charAt(n))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(De,Fe,t),Fe=t),De}function Ge(t){Re<Le||(Re>Le&&(Le=Re,Ne=[]),Ne.push(t))}function Xe(r,i,n){var o=je(n),a=n<e.length?e.charAt(n):null;return null!==i&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(i),new t(null!==r?r:function(t,e){var r,i=new Array(t.length);for(r=0;r<t.length;r++)i[r]=t[r].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(i,a),i,a,n,o.line,o.column)}function We(){var t;return(t=function(){var t,r,i,o,a,c,u,h;if(t=Re,r=Re,(i=function(){var t,r;return t=Re,e.substr(Re,2)===y?(r=y,Re+=2):(r=n,0===qe&&Ge(_)),r!==n&&(ze=t,r=g()),(t=r)===n&&(t=Re,72===e.charCodeAt(Re)?(r=m,Re++):(r=n,0===qe&&Ge(w)),r!==n&&(ze=t,r=A()),(t=r)===n&&(t=Re,86===e.charCodeAt(Re)?(r=b,Re++):(r=n,0===qe&&Ge(E)),r!==n&&(ze=t,r=I()),(t=r)===n&&(t=Re,90===e.charCodeAt(Re)?(r=C,Re++):(r=n,0===qe&&Ge(x)),r!==n&&(ze=t,r=T()),t=r))),t}())!==n?(58===e.charCodeAt(Re)?(o=f,Re++):(o=n,0===qe&&Ge(d)),o!==n?r=i=[i,o]:(Re=r,r=s)):(Re=r,r=s),r===n&&(r=l),r!==n)if(i=Re,(o=Qe())!==n&&(a=Ye())!==n?i=o=[o,a]:(Re=i,i=s),i===n&&(i=l),i!==n)if((o=Be())!==n){for(a=[],c=Re,(u=Ye())!==n&&(h=Be())!==n?c=u=[u,h]:(Re=c,c=s);c!==n;)a.push(c),c=Re,(u=Ye())!==n&&(h=Be())!==n?c=u=[u,h]:(Re=c,c=s);a!==n?(c=Re,(u=Ye())!==n&&(h=Qe())!==n?c=u=[u,h]:(Re=c,c=s),c===n&&(c=l),c!==n?((u=Ue())===n&&(u=l),u!==n?(ze=t,r=v(r,i,o,a,c,u),t=r):(Re=t,t=s)):(Re=t,t=s)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;else Re=t,t=s;return t}())===n&&(t=function(){var t,r,i,o,a,p;if(t=Re,e.substr(Re,2)===c?(r=c,Re+=2):(r=n,0===qe&&Ge(u)),r!==n)if((i=ar())!==n)if((o=Pe())!==n){for(a=[],p=Pe();p!==n;)a.push(p),p=Pe();a!==n?((p=Ue())===n&&(p=l),p!==n?(ze=t,r=h(i,o,a,p),t=r):(Re=t,t=s)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;else Re=t,t=s;return t}()),t}function Pe(){var t,e,r;return t=Re,(e=or())!==n&&(r=Je())!==n?(ze=t,t=e=p(e,r)):(Re=t,t=s),t}function Ue(){var t,r,i,o,a;for(t=Re,r=[],32===e.charCodeAt(Re)?(i=V,Re++):(i=n,0===qe&&Ge(S));i!==n;)r.push(i),32===e.charCodeAt(Re)?(i=V,Re++):(i=n,0===qe&&Ge(S));if(r!==n)if(e.substr(Re,2)===H?(i=H,Re+=2):(i=n,0===qe&&Ge(O)),i!==n){for(o=[],e.length>Re?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(k));a!==n;)o.push(a),e.length>Re?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(k));o!==n?t=r=[r,i,o]:(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;return t}function Qe(){var t,r;return t=Re,124===e.charCodeAt(Re)?(r=M,Re++):(r=n,0===qe&&Ge(R)),r!==n&&(ze=t,r=z()),t=r}function Be(){var t,r,i,o,a,c,u;if(t=Re,91===e.charCodeAt(Re)?(r=F,Re++):(r=n,0===qe&&Ge(D)),r!==n)if((i=$e())!==n){for(o=[],a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=$e())!==n?a=c=[c,u]:(Re=a,a=s);a!==n;)o.push(a),a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=$e())!==n?a=c=[c,u]:(Re=a,a=s);o!==n?(93===e.charCodeAt(Re)?(a=q,Re++):(a=n,0===qe&&Ge(Z)),a!==n?(ze=t,t=r=j(i,o)):(Re=t,t=s)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;return t}function $e(){var t,r,i,o;return t=Re,(r=function(){var t,r,i,o,a;if(t=Re,r=Re,i=[],Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be)),o!==n)for(;o!==n;)i.push(o),Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be));else i=s;if(i!==n&&(i=e.substring(r,Re)),(r=i)!==n){for(i=Re,o=[],Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));a!==n;)o.push(a),Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));o!==n&&(o=e.substring(i,Re)),(i=o)!==n&&(o=function(){var t,r,i,o;if(t=Re,e.substr(Re,2)===Te?(r=Te,Re+=2):(r=n,0===qe&&Ge(Ve)),r!==n){if(i=[],Et.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(It)),o!==n)for(;o!==n;)i.push(o),Et.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(It));else i=s;i!==n?(ze=t,r=Se(i),t=r):(Re=t,t=s)}else Re=t,t=s;return t}())!==n?(ze=t,r=Ce(r,i,o),t=r):(Re=t,t=s)}else Re=t,t=s;if(t===n){if(t=Re,r=Re,i=[],Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be)),o!==n)for(;o!==n;)i.push(o),Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be));else i=s;if(i!==n&&(i=e.substring(r,Re)),(r=i)!==n){for(i=Re,o=[],Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));a!==n;)o.push(a),Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));o!==n&&(o=e.substring(i,Re)),(i=o)!==n?(ze=t,r=xe(r,i),t=r):(Re=t,t=s)}else Re=t,t=s}return t}())!==n?((i=Je())===n&&(i=l),i!==n?((o=function(){var t,r,i,o,a,c;if(t=Re,58===e.charCodeAt(Re)?(r=f,Re++):(r=n,0===qe&&Ge(d)),r!==n){if(i=[],o=Re,(a=Ye())!==n&&(c=Be())!==n?o=a=[a,c]:(Re=o,o=s),o!==n)for(;o!==n;)i.push(o),o=Re,(a=Ye())!==n&&(c=Be())!==n?o=a=[a,c]:(Re=o,o=s);else i=s;i!==n&&(o=Ye())!==n?(ze=t,r=X(i,o),t=r):(Re=t,t=s)}else Re=t,t=s;return t}())===n&&(o=l),o!==n?(ze=t,t=r=G(r,i,o)):(Re=t,t=s)):(Re=t,t=s)):(Re=t,t=s),t}function Ye(){var t,r,i,o;return t=Re,e.substr(Re,2)===W?(r=W,Re+=2):(r=n,0===qe&&Ge(P)),r!==n&&(ze=t,r=U()),(t=r)===n&&(t=Re,45===e.charCodeAt(Re)?(r=Q,Re++):(r=n,0===qe&&Ge(B)),r!==n&&(i=function(){var t;return(t=function(){var t,e;return t=Re,(e=nr())!==n&&(ze=t,e=it(e)),(t=e)===n&&(t=Re,(e=sr())!==n&&(ze=t,e=nt(e)),t=e),t}())===n&&(t=Je()),t}())!==n?(45===e.charCodeAt(Re)?(o=Q,Re++):(o=n,0===qe&&Ge(B)),o!==n?(ze=t,t=r=$(i)):(Re=t,t=s)):(Re=t,t=s),t===n&&(t=Re,45===e.charCodeAt(Re)?(r=Q,Re++):(r=n,0===qe&&Ge(B)),r!==n&&(ze=t,r=Y()),(t=r)===n&&(t=Re,126===e.charCodeAt(Re)?(r=J,Re++):(r=n,0===qe&&Ge(K)),r!==n&&(i=function(){var t,r,i,o,a,c,u;if(t=Re,40===e.charCodeAt(Re)?(r=ot,Re++):(r=n,0===qe&&Ge(at)),r!==n)if((i=tr())!==n){for(o=[],a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=tr())!==n?a=c=[c,u]:(Re=a,a=s);a!==n;)o.push(a),a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=tr())!==n?a=c=[c,u]:(Re=a,a=s);o!==n?(41===e.charCodeAt(Re)?(a=st,Re++):(a=n,0===qe&&Ge(ct)),a!==n?(ze=t,r=ut(i,o),t=r):(Re=t,t=s)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;return t}())!==n?(126===e.charCodeAt(Re)?(o=J,Re++):(o=n,0===qe&&Ge(K)),o!==n?(ze=t,t=r=$(i)):(Re=t,t=s)):(Re=t,t=s),t===n&&(t=Re,126===e.charCodeAt(Re)?(r=J,Re++):(r=n,0===qe&&Ge(K)),r!==n&&(ze=t,r=tt()),(t=r)===n&&(t=Re,(r=et)!==n&&(ze=t,r=rt()),t=r))))),t}function Je(){var t,r,i,o,a,c,u;if(t=Re,40===e.charCodeAt(Re)?(r=ot,Re++):(r=n,0===qe&&Ge(at)),r!==n)if((i=Ke())!==n){for(o=[],a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=Ke())!==n?a=c=[c,u]:(Re=a,a=s);a!==n;)o.push(a),a=Re,44===e.charCodeAt(Re)?(c=L,Re++):(c=n,0===qe&&Ge(N)),c!==n&&(u=Ke())!==n?a=c=[c,u]:(Re=a,a=s);o!==n?(41===e.charCodeAt(Re)?(a=st,Re++):(a=n,0===qe&&Ge(ct)),a!==n?(ze=t,t=r=ut(i,o)):(Re=t,t=s)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;return t}function Ke(){var t,r,i,o,a,c;return t=Re,(r=er())===n&&(r=l),r!==n&&(i=rr())!==n?(o=Re,64===e.charCodeAt(Re)?(a=lt,Re++):(a=n,0===qe&&Ge(ht)),a!==n&&(c=ir())!==n?o=a=[a,c]:(Re=o,o=s),o===n&&(o=l),o!==n?(ze=t,t=r=pt(r,i,o)):(Re=t,t=s)):(Re=t,t=s),t}function tr(){var t,r,i,o,a,c;return t=Re,(r=er())===n&&(r=l),r!==n&&(i=rr())!==n?(o=Re,64===e.charCodeAt(Re)?(a=lt,Re++):(a=n,0===qe&&Ge(ht)),a!==n&&(c=ir())!==n?o=a=[a,c]:(Re=o,o=s),o===n&&(o=l),o!==n?(ze=t,t=r=ft(r,i,o)):(Re=t,t=s)):(Re=t,t=s),t}function er(){var t,r;return t=Re,e.substr(Re,2)===dt?(r=dt,Re+=2):(r=n,0===qe&&Ge(vt)),r!==n&&(ze=t,r=yt()),(t=r)===n&&(t=Re,e.substr(Re,2)===_t?(r=_t,Re+=2):(r=n,0===qe&&Ge(gt)),r!==n&&(ze=t,r=mt()),(t=r)===n&&(t=Re,e.substr(Re,2)===wt?(r=wt,Re+=2):(r=n,0===qe&&Ge(At)),r!==n&&(ze=t,r=bt()),t=r)),t}function rr(){var t;return(t=nr())===n&&(t=function(){var t,r,i;return t=Re,(r=sr())!==n&&(ze=t,r=xt(r)),(t=r)===n&&(t=Re,45===e.charCodeAt(Re)?(r=Q,Re++):(r=n,0===qe&&Ge(B)),r!==n&&(i=sr())!==n?(ze=t,r=Tt(i),t=r):(Re=t,t=s),t===n&&(t=Re,43===e.charCodeAt(Re)?(r=Vt,Re++):(r=n,0===qe&&Ge(St)),r!==n&&(i=sr())!==n?(ze=t,r=xt(i),t=r):(Re=t,t=s))),t}())===n&&(t=function(){var t,r,i,o,a;return t=Re,(r=ar())!==n?((i=or())===n&&(i=l),i!==n?((o=function(){var t,r,i;return t=Re,47===e.charCodeAt(Re)?(r=oe,Re++):(r=n,0===qe&&Ge(ae)),r!==n&&(i=sr())!==n?(ze=t,r=se(i),t=r):(Re=t,t=s),t===n&&(t=Re,e.substr(Re,2)===ce?(r=ce,Re+=2):(r=n,0===qe&&Ge(ue)),r!==n&&(i=sr())!==n?(ze=t,r=se(i),t=r):(Re=t,t=s),t===n&&(t=Re,e.substr(Re,2)===le?(r=le,Re+=2):(r=n,0===qe&&Ge(he)),r!==n&&(i=sr())!==n?(ze=t,r=pe(i),t=r):(Re=t,t=s),t===n&&(t=Re,42===e.charCodeAt(Re)?(r=fe,Re++):(r=n,0===qe&&Ge(de)),r!==n&&(i=sr())!==n?(ze=t,r=ve(i),t=r):(Re=t,t=s),t===n&&(t=Re,e.substr(Re,2)===ye?(r=ye,Re+=2):(r=n,0===qe&&Ge(_e)),r!==n&&(i=sr())!==n?(ze=t,r=ve(i),t=r):(Re=t,t=s),t===n&&(t=Re,e.substr(Re,2)===ge?(r=ge,Re+=2):(r=n,0===qe&&Ge(me)),r!==n&&(i=sr())!==n?(ze=t,r=we(i),t=r):(Re=t,t=s)))))),t}())===n&&(o=l),o!==n?((a=function(){var t,r,i;return t=Re,45===e.charCodeAt(Re)?(r=Q,Re++):(r=n,0===qe&&Ge(B)),r!==n&&(i=sr())!==n?(ze=t,r=we(i),t=r):(Re=t,t=s),t===n&&(t=Re,43===e.charCodeAt(Re)?(r=Vt,Re++):(r=n,0===qe&&Ge(St)),r!==n&&(i=sr())!==n?(ze=t,r=ve(i),t=r):(Re=t,t=s)),t}())===n&&(a=l),a!==n?(ze=t,r=Rt(r,i,o,a),t=r):(Re=t,t=s)):(Re=t,t=s)):(Re=t,t=s)):(Re=t,t=s),t}()),t}function ir(){var t,r,i;if(t=Re,r=[],Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It)),i!==n)for(;i!==n;)r.push(i),Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It));else r=s;return r!==n&&(ze=t,r=Ct(r)),t=r}function nr(){var t,r,i,o;return t=Re,(r=sr())!==n?(37===e.charCodeAt(Re)?(i=Ht,Re++):(i=n,0===qe&&Ge(Ot)),i!==n?(ze=t,t=r=kt(r)):(Re=t,t=s)):(Re=t,t=s),t===n&&(t=Re,45===e.charCodeAt(Re)?(r=Q,Re++):(r=n,0===qe&&Ge(B)),r!==n&&(i=sr())!==n?(37===e.charCodeAt(Re)?(o=Ht,Re++):(o=n,0===qe&&Ge(Ot)),o!==n?(ze=t,t=r=Mt(i)):(Re=t,t=s)):(Re=t,t=s),t===n&&(t=Re,43===e.charCodeAt(Re)?(r=Vt,Re++):(r=n,0===qe&&Ge(St)),r!==n&&(i=sr())!==n?(37===e.charCodeAt(Re)?(o=Ht,Re++):(o=n,0===qe&&Ge(Ot)),o!==n?(ze=t,t=r=kt(i)):(Re=t,t=s)):(Re=t,t=s))),t}function or(){var t,r;return t=Re,e.substr(Re,5)===zt?(r=zt,Re+=5):(r=n,0===qe&&Ge(Ft)),r!==n&&(ze=t,r=Dt()),(t=r)===n&&(t=Re,e.substr(Re,6)===Lt?(r=Lt,Re+=6):(r=n,0===qe&&Ge(Nt)),r!==n&&(ze=t,r=qt()),(t=r)===n&&(t=Re,e.substr(Re,4)===Zt?(r=Zt,Re+=4):(r=n,0===qe&&Ge(jt)),r!==n&&(ze=t,r=Gt()),(t=r)===n&&(t=Re,e.substr(Re,7)===Xt?(r=Xt,Re+=7):(r=n,0===qe&&Ge(Wt)),r!==n&&(ze=t,r=Pt()),(t=r)===n&&(t=Re,e.substr(Re,6)===Ut?(r=Ut,Re+=6):(r=n,0===qe&&Ge(Qt)),r!==n&&(ze=t,r=Bt()),(t=r)===n&&(t=Re,e.substr(Re,7)===$t?(r=$t,Re+=7):(r=n,0===qe&&Ge(Yt)),r!==n&&(ze=t,r=Jt()),(t=r)===n&&(t=Re,e.substr(Re,8)===Kt?(r=Kt,Re+=8):(r=n,0===qe&&Ge(te)),r!==n&&(ze=t,r=ee()),(t=r)===n&&(t=Re,e.substr(Re,8)===re?(r=re,Re+=8):(r=n,0===qe&&Ge(ie)),r!==n&&(ze=t,r=ne()),t=r))))))),t}function ar(){var t,r,i,o,a;if(t=Re,r=Re,i=[],Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be)),o!==n)for(;o!==n;)i.push(o),Ae.test(e.charAt(Re))?(o=e.charAt(Re),Re++):(o=n,0===qe&&Ge(be));else i=s;if(i!==n&&(i=e.substring(r,Re)),(r=i)!==n){for(i=Re,o=[],Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));a!==n;)o.push(a),Ee.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(Ie));o!==n&&(o=e.substring(i,Re)),(i=o)!==n?(ze=t,t=r=xe(r,i)):(Re=t,t=s)}else Re=t,t=s;return t}function sr(){var t,r,i,o,a;if(t=Re,r=[],Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It)),i!==n)for(;i!==n;)r.push(i),Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It));else r=s;if(r!==n)if(46===e.charCodeAt(Re)?(i=He,Re++):(i=n,0===qe&&Ge(Oe)),i!==n){if(o=[],Et.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(It)),a!==n)for(;a!==n;)o.push(a),Et.test(e.charAt(Re))?(a=e.charAt(Re),Re++):(a=n,0===qe&&Ge(It));else o=s;o!==n?(ze=t,t=r=ke(r,o)):(Re=t,t=s)}else Re=t,t=s;else Re=t,t=s;if(t===n){if(t=Re,r=[],Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It)),i!==n)for(;i!==n;)r.push(i),Et.test(e.charAt(Re))?(i=e.charAt(Re),Re++):(i=n,0===qe&&Ge(It));else r=s;r!==n&&(ze=t,r=Me(r)),t=r}return t}function cr(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}if((r=a())!==n&&Re===e.length)return r;throw r!==n&&Re<e.length&&Ge({type:"end",description:"end of input"}),Xe(null,Ne,Le)}}}();const c={HORIZONTAL:1,VERTICAL:2,ZINDEX:4};function u(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;const r="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?i.WIDTH:i.HEIGHT,relation:t.relation.relation||n.EQU,view2:r,attr2:t.horizontal?i.WIDTH:i.HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:r,attr1:t.horizontal?i.WIDTH:i.HEIGHT,relation:t.relation.relation||n.EQU,view2:t.relation.view,attr2:t.horizontal?i.WIDTH:i.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:r,attr1:t.horizontal?i.WIDTH:i.HEIGHT,relation:n.EQU,view2:null,attr2:i.CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var o=0;o<t.prevViews.length;o++){const n=t.prevViews[o];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=n!==e?i.RIGHT:i.LEFT,t.curAttr=i.LEFT;break;case c.VERTICAL:t.prevAttr=n!==e?i.BOTTOM:i.TOP,t.curAttr=i.TOP;break;case c.ZINDEX:t.prevAttr=i.ZINDEX,t.curAttr=i.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function l(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;const r="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:r,attr1:t.horizontal?i.WIDTH:i.HEIGHT,relation:t.relation.relation||n.EQU,view2:t.relation.view,attr2:t.horizontal?i.WIDTH:i.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var o=0;o<t.prevViews.length;o++){const n=t.prevViews[o];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=n!==e?i.RIGHT:i.LEFT,t.curAttr=i.LEFT;break;case c.VERTICAL:t.prevAttr=n!==e?i.BOTTOM:i.TOP,t.curAttr=i.TOP;break;case c.ZINDEX:t.prevAttr=i.ZINDEX,t.curAttr=i.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function h(t,e,r){let o;for(var a=1;a<=4;a*=2)if(r.orientations&a&&r.stack.orientation!==a&&!(r.stack.processedOrientations&a)){r.stack.processedOrientations=r.stack.processedOrientations|a,o=o||{name:e,type:"stack"};for(var s=0,u=r.stack.subViews.length;s<u;s++)a===c.ZINDEX?t.constraints.push({view1:o,attr1:i.ZINDEX,relation:n.EQU,view2:r.stack.subViews[s],attr2:i.ZINDEX}):(t.constraints.push({view1:o,attr1:a===c.VERTICAL?i.HEIGHT:i.WIDTH,relation:n.EQU,view2:r.stack.subViews[s],attr2:a===c.VERTICAL?i.HEIGHT:i.WIDTH}),t.constraints.push({view1:o,attr1:a===c.VERTICAL?i.TOP:i.LEFT,relation:n.EQU,view2:r.stack.subViews[s],attr2:a===c.VERTICAL?i.TOP:i.LEFT}))}}function p(t,e){if(!0===e&&(e=t.match(/\.\.\d+$/))&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2))),!e)return[t];var r,i=t.match(/\d+$/),n=[];if(i)for(t=t.substring(0,t.length-i[0].length),r=parseInt(i);r<=e;r++)n.push(t+r);else for(n.push(t),r=2;r<=e;r++)n.push(t+r);return n}function f(t,e,r){const n=r?r.view:null,o=[];let a,s=[];n&&(e.push({view:n}),s.push(n));for(var d=0;d<e.length;d++){let r=e[d];if(!Array.isArray(r)&&r.hasOwnProperty("view")||Array.isArray(r)&&r[0].view&&!r[0].relation){const e=Array.isArray(r)?r:[r];for(var v=0;v<e.length;v++){const u=","===(r=e[v])?[]:r.view?p(r.view,r.range):[null];for(var y=0;y<u.length;y++){const e=u[y];if(s.push(e),e!==n&&(o.push(e),(a=t.subViews[e])||(a={orientations:0},t.subViews[e]=a),a.orientations=a.orientations|t.orientation,a.stack&&h(t,e,a)),void 0!==t.prevViews&&void 0!==e&&t.relation&&"none"!==t.relation.relation)for(var _=0;_<t.prevViews.length;_++){const r=t.prevViews[_];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=r!==n?i.RIGHT:i.LEFT,t.curAttr=e!==n?i.LEFT:i.RIGHT;break;case c.VERTICAL:t.prevAttr=r!==n?i.BOTTOM:i.TOP,t.curAttr=e!==n?i.TOP:i.BOTTOM;break;case c.ZINDEX:t.prevAttr=i.ZINDEX,t.curAttr=i.ZINDEX,t.relation.constant=r?t.relation.constant||"default":0}t.constraints.push({view1:r,attr1:t.prevAttr,relation:t.relation.relation,view2:e,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}const l=r.constraints;if(l)for(var g=0;g<l.length;g++)t.prevAttr=t.horizontal?i.WIDTH:i.HEIGHT,t.curAttr=l[g].view||l[g].multiplier?l[g].attribute||t.prevAttr:l[g].variable?i.VARIABLE:i.CONST,t.constraints.push({view1:e,attr1:t.prevAttr,relation:l[g].relation,view2:l[g].view,attr2:t.curAttr,multiplier:l[g].multiplier,constant:l[g].constant,priority:l[g].priority});r.cascade&&f(t,r.cascade,r)}}}else","!==r&&(t.prevViews=s,s=[],t.relation=r[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&u(t,n),t.relation.multiplier&&l(t,n)))}if(n){if(a=t.subViews[n]){if(a.stack){const t=new Error('A stack named "'+n+'" has already been created');throw t.column=r.$parserOffset+1,t}}else a={orientations:t.orientation},t.subViews[n]=a;a.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:o},h(t,n,a)}}const d=["viewport","spacing","colors","shapes","widths","heights"];var v=class{static parseLine(t,e){if(0===t.length||e&&e.extended&&0===t.indexOf("//"))return[];const r=e&&e.extended?s.parse(t):a.parse(t);if(e&&"raw"===e.outFormat)return[r];let i={constraints:[],lineIndex:(e?e.lineIndex:void 0)||1,subViews:(e?e.subViews:void 0)||{}};if("attribute"===r.type)for(let t=0;t<r.attributes.length;t++){const e=r.attributes[t];for(let t=0;t<e.predicates.length;t++){const n=e.predicates[t];i.constraints.push({view1:r.view,attr1:e.attr,relation:n.relation,view2:n.view,attr2:n.attribute||e.attr,multiplier:n.multiplier,constant:n.constant,priority:n.priority})}}else switch(r.orientation){case"horizontal":i.orientation=c.HORIZONTAL,i.horizontal=!0,f(i,r.cascade,null);break;case"vertical":i.orientation=c.VERTICAL,f(i,r.cascade,null);break;case"horzvert":i.orientation=c.HORIZONTAL,i.horizontal=!0,f(i,r.cascade,null),f(i={constraints:i.constraints,lineIndex:i.lineIndex,subViews:i.subViews,orientation:c.VERTICAL},r.cascade,null);break;case"zIndex":i.orientation=c.ZINDEX,f(i,r.cascade,null)}return i.constraints}static parse(t,e){const r=e&&e.lineSeparator?e.lineSeparator:"\n";if(!Array.isArray(t)&&t.indexOf(r)<0)try{return this.parseLine(t,e)}catch(e){throw e.source=t,e}let i;t=Array.isArray(t)?t:[t];let n,o=[],a=0;const s={lineIndex:a,extended:e&&e.extended,strict:!e||void 0===e.strict||e.strict,outFormat:e?e.outFormat:void 0,subViews:{}};try{for(var c=0;c<t.length;c++){i=t[c].split(r);for(var u=0;u<i.length;u++)n=i[u],a++,s.lineIndex=a,s.strict||(n=n.trim()),(s.strict||n.length)&&(o=o.concat(this.parseLine(n,s)))}}catch(t){throw t.source=n,t.line=a,t}return o}static parseMetaInfo(t,e){const r=e&&e.lineSeparator?e.lineSeparator:"\n",i=e?e.prefix:void 0;t=Array.isArray(t)?t:[t];const n={};for(var o,a=0;a<t.length;a++){const e=t[a].split(r);for(var s=0;s<e.length;s++){const t=e[s];for(var c=0;c<d.length;c++)for(var u=0;u<(i?2:1);u++){const e=d[c],r=(0===u?"":i)+e;if(0===t.indexOf("//"+r+" ")){const i=t.substring(3+r.length).split(" ");for(var l=0;l<i.length;l++){n[e]=n[e]||{};const t=i[l].split(":"),r=p(t[0],!0);for(var h=0;h<r.length;h++)n[e][r[h]]=t.length>1?t[1]:""}}else 0===t.indexOf("//"+r+":")&&(n[e]=t.substring(3+r.length))}}}if(n.viewport){const t=n.viewport;var f=t["aspect-ratio"];f&&(f=f.split("/"),t["aspect-ratio"]=parseInt(f[0])/parseInt(f[1])),void 0!==t.height&&(t.height="intrinsic"===t.height||parseInt(t.height)),void 0!==t.width&&(t.width="intrinsic"===t.width||parseInt(t.width)),void 0!==t["max-height"]&&(t["max-height"]=parseInt(t["max-height"])),void 0!==t["max-width"]&&(t["max-width"]=parseInt(t["max-width"])),void 0!==t["min-height"]&&(t["min-height"]=parseInt(t["min-height"])),void 0!==t["min-width"]&&(t["min-width"]=parseInt(t["min-width"]))}if(n.widths)for(o in n.widths){const t="intrinsic"===n.widths[o]||parseInt(n.widths[o]);n.widths[o]=t,(void 0===t||isNaN(t))&&delete n.widths[o]}if(n.heights)for(o in n.heights){const t="intrinsic"===n.heights[o]||parseInt(n.heights[o]);n.heights[o]=t,(void 0===t||isNaN(t))&&delete n.heights[o]}if(n.spacing){const t=JSON.parse(n.spacing);if(n.spacing=t,Array.isArray(t)){for(var v=0,y=t.length;v<y;v++)if(isNaN(t[v])){delete n.spacing;break}}else(void 0===t||isNaN(t))&&delete n.spacing}return n}};function y(t){return new _}var _=function(){function t(){this.index={},this.array=[]}return t.prototype.size=function(){return this.array.length},t.prototype.empty=function(){return 0===this.array.length},t.prototype.itemAt=function(t){return this.array[t]},t.prototype.contains=function(t){return void 0!==this.index[t.id()]},t.prototype.find=function(t){var e=this.index[t.id()];return void 0===e?void 0:this.array[e]},t.prototype.setDefault=function(t,e){var r=this.index[t.id()];if(void 0===r){var i=new g(t,e());return this.index[t.id()]=this.array.length,this.array.push(i),i}return this.array[r]},t.prototype.insert=function(t,e){var r=new g(t,e),i=this.index[t.id()];return void 0===i?(this.index[t.id()]=this.array.length,this.array.push(r)):this.array[i]=r,r},t.prototype.erase=function(t){var e=this.index[t.id()];if(void 0!==e){this.index[t.id()]=void 0;var r=this.array[e],i=this.array.pop();return r!==i&&(this.array[e]=i,this.index[i.first.id()]=e),r}},t.prototype.copy=function(){for(var e=new t,r=0;r<this.array.length;r++){var i=this.array[r].copy();e.array[r]=i,e.index[i.first.id()]=r}return e},t}(),g=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}(),m=function(){function t(t){void 0===t&&(t=""),this._value=0,this._context=null,this._id=w++,this._name=t}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.name=function(){return this._name},t.prototype.setName=function(t){this._name=t},t.prototype.context=function(){return this._context},t.prototype.setContext=function(t){this._context=t},t.prototype.value=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.plus=function(t){return new A(this,t)},t.prototype.minus=function(t){return new A(this,"number"==typeof t?-t:[-1,t])},t.prototype.multiply=function(t){return new A([t,this])},t.prototype.divide=function(t){return new A([1/t,this])},t.prototype.toJSON=function(){return{name:this._name,value:this._value}},t.prototype.toString=function(){return this._context+"["+this._name+":"+this._value+"]"},t}(),w=0,A=function(){function t(){var t=b(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,r=this._terms.size();e<r;e++){var i=this._terms.itemAt(e);t+=i.first.value()*i.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,"number"==typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t.prototype.isConstant=function(){return 0==this._terms.size()},t.prototype.toString=function(){var t=this._terms.array.map(function(t,e){return t.second+"*"+t.first.toString()}).join(" + ");return this.isConstant()||0===this._constant||(t+=" + "),t+=this._constant},t}();function b(t){for(var e=0,r=function(){return 0},i=y(m.Compare),n=0,o=t.length;n<o;++n){var a=t[n];if("number"==typeof a)e+=a;else if(a instanceof m)i.setDefault(a,r).second+=1;else if(a instanceof A){e+=a.constant();for(var s=0,c=(p=a.terms()).size();s<c;s++){var u=p.itemAt(s);i.setDefault(u.first,r).second+=u.second}}else{if(!(a instanceof Array))throw new Error("invalid Expression argument: "+a);if(2!==a.length)throw new Error("array must have length 2");var l=a[0],h=a[1];if("number"!=typeof l)throw new Error("array item 0 must be a number");if(h instanceof m)i.setDefault(h,r).second+=l;else{if(!(h instanceof A))throw new Error("array item 1 must be a variable or expression");e+=h.constant()*l;var p;for(s=0,c=(p=h.terms()).size();s<c;s++){u=p.itemAt(s);i.setDefault(u.first,r).second+=u.second*l}}}}return{terms:i,constant:e}}var E,I=function(){function t(){}return t.create=function(t,e,r,i){void 0===i&&(i=1);var n=0;return n+=1e6*Math.max(0,Math.min(1e3,t*i)),n+=1e3*Math.max(0,Math.min(1e3,e*i)),n+=Math.max(0,Math.min(1e3,r*i))},t.clip=function(e){return Math.max(0,Math.min(t.required,e))},t.required=t.create(1e3,1e3,1e3),t.strong=t.create(1,0,0),t.medium=t.create(0,1,0),t.weak=t.create(0,0,1),t}();!function(t){t[t.Le=0]="Le",t[t.Ge=1]="Ge",t[t.Eq=2]="Eq"}(E||(E={}));var C,x=function(){function t(t,e,r,i){void 0===i&&(i=I.required),this._id=T++,this._operator=e,this._strength=I.clip(i),this._expression=void 0===r&&t instanceof A?t:t.minus(r)}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.expression=function(){return this._expression},t.prototype.op=function(){return this._operator},t.prototype.strength=function(){return this._strength},t.prototype.toString=function(){return this._expression.toString()+" "+["<=",">=","="][this._operator]+" 0 ("+this._strength.toString()+")"},t}(),T=0,V=function(){function t(){this._cnMap=y(x.Compare),this._rowMap=y(H.Compare),this._varMap=y(m.Compare),this._editMap=y(m.Compare),this._infeasibleRows=[],this._objective=new k,this._artificial=null,this._idTick=0}return t.prototype.createConstraint=function(t,e,r,i){void 0===i&&(i=I.required);var n=new x(t,e,r,i);return this.addConstraint(n),n},t.prototype.addConstraint=function(t){if(void 0!==this._cnMap.find(t))throw new Error("duplicate constraint");var e=this._createRow(t),r=e.row,i=e.tag,n=this._chooseSubject(r,i);if(n.type()===C.Invalid&&r.allDummies()){if(!S(r.constant()))throw new Error("unsatisfiable constraint");n=i.marker}if(n.type()===C.Invalid){if(!this._addWithArtificialVariable(r))throw new Error("unsatisfiable constraint")}else r.solveFor(n),this._substitute(n,r),this._rowMap.insert(n,r);this._cnMap.insert(t,i),this._optimize(this._objective)},t.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error("unknown constraint");this._removeConstraintEffects(t,e.second);var r=e.second.marker,i=this._rowMap.erase(r);if(void 0===i){var n=this._getMarkerLeavingSymbol(r);if(n.type()===C.Invalid)throw new Error("failed to find leaving row");(i=this._rowMap.erase(n)).second.solveForEx(n,r),this._substitute(r,i.second)}this._optimize(this._objective)},t.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},t.prototype.addEditVariable=function(t,e){if(void 0!==this._editMap.find(t))throw new Error("duplicate edit variable");if((e=I.clip(e))===I.required)throw new Error("bad required strength");var r=new A(t),i=new x(r,E.Eq,void 0,e);this.addConstraint(i);var n={tag:this._cnMap.find(i).second,constraint:i,constant:0};this._editMap.insert(t,n)},t.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error("unknown edit variable");this.removeConstraint(e.second.constraint)},t.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},t.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error("unknown edit variable");var i=this._rowMap,n=r.second,o=e-n.constant;n.constant=e;var a=n.tag.marker,s=i.find(a);if(void 0!==s)return s.second.add(-o)<0&&this._infeasibleRows.push(a),void this._dualOptimize();var c=n.tag.other;if(void 0!==(s=i.find(c)))return s.second.add(o)<0&&this._infeasibleRows.push(c),void this._dualOptimize();for(var u=0,l=i.size();u<l;++u){var h=i.itemAt(u),p=h.second,f=p.coefficientFor(a);0!==f&&p.add(o*f)<0&&h.first.type()!==C.External&&this._infeasibleRows.push(h.first)}this._dualOptimize()},t.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,i=t.size();r<i;++r){var n=t.itemAt(r),o=e.find(n.second);void 0!==o?n.first.setValue(o.second.constant()):n.first.setValue(0)}},t.prototype._getVarSymbol=function(t){var e=this;return this._varMap.setDefault(t,function(){return e._makeSymbol(C.External)}).second},t.prototype._createRow=function(t){for(var e=t.expression(),r=new k(e.constant()),i=e.terms(),n=0,o=i.size();n<o;++n){var a=i.itemAt(n);if(!S(a.second)){var s=this._getVarSymbol(a.first),c=this._rowMap.find(s);void 0!==c?r.insertRow(c.second,a.second):r.insertSymbol(s,a.second)}}var u=this._objective,l=t.strength(),h={marker:O,other:O};switch(t.op()){case E.Le:case E.Ge:var p=t.op()===E.Le?1:-1,f=this._makeSymbol(C.Slack);if(h.marker=f,r.insertSymbol(f,p),l<I.required){var d=this._makeSymbol(C.Error);h.other=d,r.insertSymbol(d,-p),u.insertSymbol(d,l)}break;case E.Eq:if(l<I.required){var v=this._makeSymbol(C.Error),y=this._makeSymbol(C.Error);h.marker=v,h.other=y,r.insertSymbol(v,-1),r.insertSymbol(y,1),u.insertSymbol(v,l),u.insertSymbol(y,l)}else{var _=this._makeSymbol(C.Dummy);h.marker=_,r.insertSymbol(_)}}return r.constant()<0&&r.reverseSign(),{row:r,tag:h}},t.prototype._chooseSubject=function(t,e){for(var r=t.cells(),i=0,n=r.size();i<n;++i){var o=r.itemAt(i);if(o.first.type()===C.External)return o.first}var a=e.marker.type();return(a===C.Slack||a===C.Error)&&t.coefficientFor(e.marker)<0?e.marker:((a=e.other.type())===C.Slack||a===C.Error)&&t.coefficientFor(e.other)<0?e.other:O},t.prototype._addWithArtificialVariable=function(t){var e=this._makeSymbol(C.Slack);this._rowMap.insert(e,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var r=S(this._artificial.constant());this._artificial=null;var i=this._rowMap.erase(e);if(void 0!==i){var n=i.second;if(n.isConstant())return r;var o=this._anyPivotableSymbol(n);if(o.type()===C.Invalid)return!1;n.solveForEx(e,o),this._substitute(o,n),this._rowMap.insert(o,n)}for(var a=this._rowMap,s=0,c=a.size();s<c;++s)a.itemAt(s).second.removeSymbol(e);return this._objective.removeSymbol(e),r},t.prototype._substitute=function(t,e){for(var r=this._rowMap,i=0,n=r.size();i<n;++i){var o=r.itemAt(i);o.second.substitute(t,e),o.second.constant()<0&&o.first.type()!==C.External&&this._infeasibleRows.push(o.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},t.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(e.type()===C.Invalid)return;var r=this._getLeavingSymbol(e);if(r.type()===C.Invalid)throw new Error("the objective is unbounded");var i=this._rowMap.erase(r).second;i.solveForEx(r,e),this._substitute(e,i),this._rowMap.insert(e,i)}},t.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),i=t.find(r);if(void 0!==i&&i.second.constant()<0){var n=this._getDualEnteringSymbol(i.second);if(n.type()===C.Invalid)throw new Error("dual optimize failed");var o=i.second;t.erase(r),o.solveForEx(r,n),this._substitute(n,o),t.insert(n,o)}}},t.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,i=e.size();r<i;++r){var n=e.itemAt(r),o=n.first;if(n.second<0&&o.type()!==C.Dummy)return o}return O},t.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=O,i=t.cells(),n=0,o=i.size();n<o;++n){var a=i.itemAt(n),s=a.first,c=a.second;if(c>0&&s.type()!==C.Dummy){var u=this._objective.coefficientFor(s)/c;u<e&&(e=u,r=s)}}return r},t.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=O,i=this._rowMap,n=0,o=i.size();n<o;++n){var a=i.itemAt(n),s=a.first;if(s.type()!==C.External){var c=a.second,u=c.coefficientFor(t);if(u<0){var l=-c.constant()/u;l<e&&(e=l,r=s)}}}return r},t.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,i=e,n=O,o=n,a=n,s=n,c=this._rowMap,u=0,l=c.size();u<l;++u){var h=c.itemAt(u),p=h.second,f=p.coefficientFor(t);if(0!==f){var d=h.first;if(d.type()===C.External)s=d;else if(f<0){(v=-p.constant()/f)<r&&(r=v,o=d)}else{var v;(v=p.constant()/f)<i&&(i=v,a=d)}}}return o!==n?o:a!==n?a:s},t.prototype._removeConstraintEffects=function(t,e){e.marker.type()===C.Error&&this._removeMarkerEffects(e.marker,t.strength()),e.other.type()===C.Error&&this._removeMarkerEffects(e.other,t.strength())},t.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},t.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,i=e.size();r<i;++r){var n=e.itemAt(r),o=n.first.type();if(o===C.Slack||o===C.Error)return n.first}return O},t.prototype._makeSymbol=function(t){return new H(t,this._idTick++)},t}();function S(t){return t<0?-t<1e-8:t<1e-8}!function(t){t[t.Invalid=0]="Invalid",t[t.External=1]="External",t[t.Slack=2]="Slack",t[t.Error=3]="Error",t[t.Dummy=4]="Dummy"}(C||(C={}));var H=function(){function t(t,e){this._id=e,this._type=t}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),O=new H(C.Invalid,-1),k=function(){function t(t){void 0===t&&(t=0),this._cellMap=y(H.Compare),this._constant=t}return t.prototype.cells=function(){return this._cellMap},t.prototype.constant=function(){return this._constant},t.prototype.isConstant=function(){return this._cellMap.empty()},t.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();e<r;++e){if(t.itemAt(e).first.type()!==C.Dummy)return!1}return!0},t.prototype.copy=function(){var e=new t(this._constant);return e._cellMap=this._cellMap.copy(),e},t.prototype.add=function(t){return this._constant+=t},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1),S(this._cellMap.setDefault(t,function(){return 0}).second+=e)&&this._cellMap.erase(t)},t.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,i=0,n=r.size();i<n;++i){var o=r.itemAt(i);this.insertSymbol(o.first,o.second*e)}},t.prototype.removeSymbol=function(t){this._cellMap.erase(t)},t.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();e<r;++e){var i=t.itemAt(e);i.second=-i.second}},t.prototype.solveFor=function(t){var e=this._cellMap,r=-1/e.erase(t).second;this._constant*=r;for(var i=0,n=e.size();i<n;++i)e.itemAt(i).second*=r},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},t.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},t}();var M=class{constructor(t){this._name=t.name,this._type=t.type,this._solver=t.solver,this._attr={},t.name||(this._attr[i.LEFT]=new m,this._solver.addConstraint(new x(this._attr[i.LEFT],E.Eq,0)),this._attr[i.TOP]=new m,this._solver.addConstraint(new x(this._attr[i.TOP],E.Eq,0)),this._attr[i.ZINDEX]=new m,this._solver.addConstraint(new x(this._attr[i.ZINDEX],E.Eq,0)))}toJSON(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}toString(){JSON.stringify(this.toJSON(),void 0,2)}get name(){return this._name}get left(){return this._getAttrValue(i.LEFT)}get right(){return this._getAttrValue(i.RIGHT)}get width(){return this._getAttrValue(i.WIDTH)}get height(){return this._getAttrValue(i.HEIGHT)}get intrinsicWidth(){return this._intrinsicWidth}set intrinsicWidth(t){if(void 0!==t&&t!==this._intrinsicWidth){const e=this._getAttr(i.WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVariable(e,I.create(this._name?998:999,1e3,1e3)),this._intrinsicWidth=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}get intrinsicHeight(){return this._intrinsicHeight}set intrinsicHeight(t){if(void 0!==t&&t!==this._intrinsicHeight){const e=this._getAttr(i.HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVariable(e,I.create(this._name?998:999,1e3,1e3)),this._intrinsicHeight=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}get top(){return this._getAttrValue(i.TOP)}get bottom(){return this._getAttrValue(i.BOTTOM)}get centerX(){return this._getAttrValue(i.CENTERX)}get centerY(){return this._getAttrValue(i.CENTERY)}get zIndex(){return this._getAttrValue(i.ZINDEX)}get type(){return this._type}getValue(t){return this._attr[t]?this._attr[t].value():void 0}_getAttr(t){if(this._attr[t])return this._attr[t];switch(this._attr[t]=new m,t){case i.RIGHT:this._getAttr(i.LEFT),this._getAttr(i.WIDTH),this._solver.addConstraint(new x(this._attr[t],E.Eq,this._attr[i.LEFT].plus(this._attr[i.WIDTH])));break;case i.BOTTOM:this._getAttr(i.TOP),this._getAttr(i.HEIGHT),this._solver.addConstraint(new x(this._attr[t],E.Eq,this._attr[i.TOP].plus(this._attr[i.HEIGHT])));break;case i.CENTERX:this._getAttr(i.LEFT),this._getAttr(i.WIDTH),this._solver.addConstraint(new x(this._attr[t],E.Eq,this._attr[i.LEFT].plus(this._attr[i.WIDTH].divide(2))));break;case i.CENTERY:this._getAttr(i.TOP),this._getAttr(i.HEIGHT),this._solver.addConstraint(new x(this._attr[t],E.Eq,this._attr[i.TOP].plus(this._attr[i.HEIGHT].divide(2))))}return this._solver.updateVariables(),this._attr[t]}_getAttrValue(t){let e;return e=this._getAttr(t).value()}};let R;function z(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new M({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new M({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function F(t){let e;const r=void 0!==t.multiplier?t.multiplier:1;let o=void 0!==t.constant?t.constant:0;"default"===o&&(o=function(t){let e=4;if(t.view1||"left"!==t.attr1)if(t.view1||"top"!==t.attr1)if(t.view2||"right"!==t.attr2)if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2;else e=1;else e=0;else e=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[e]||(this._spacingVars[e]=new m,this._solver.addEditVariable(this._spacingVars[e],I.create(999,1e3,1e3)),this._spacingExpr[e]=this._spacingVars[e].multiply(-1),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}.call(this,t));const a=z.call(this,t.view1)._getAttr(t.attr1);let s,c;switch(t.attr2===i.CONST?s=function(t,e){let r;return r=new m,this._solver.addConstraint(new x(r,E.Eq,e)),r}.call(this,void 0,t.constant):(s=z.call(this,t.view2)._getAttr(t.attr2),1!==r&&o?s=s.multiply(r).plus(o):o?s=s.plus(o):1!==r&&(s=s.multiply(r))),c=void 0!==t.priority&&t.priority<1e3?I.create(0,t.priority,1e3):R,t.relation){case n.EQU:e=new x(a,E.Eq,s,c);break;case n.GEQ:e=new x(a,E.Ge,s,c);break;case n.LEQ:e=new x(a,E.Le,s,c);break;default:throw"Invalid relation specified: "+t.relation}this._solver.addConstraint(e)}R=I.create(0,1e3,1e3);var D=class{constructor(t){this._solver=new V,this._subViews={},this._parentSubView=new M({solver:this._solver}),this.setSpacing(t&&void 0!==t.spacing?t.spacing:8),t&&(void 0===t.width&&void 0===t.height||this.setSize(t.width,t.height),t.constraints&&this.addConstraints(t.constraints))}setSize(t,e){return this._parentSubView.intrinsicWidth=t,this._parentSubView.intrinsicHeight=e,this}get width(){return this._parentSubView.intrinsicWidth}get height(){return this._parentSubView.intrinsicHeight}get fittingWidth(){return this._parentSubView.width}get fittingHeight(){return this._parentSubView.height}setSpacing(t){switch(Array.isArray(t)?t.length:-1){case-1:t=[t,t,t,t,t,t,1];break;case 1:t=[t[0],t[0],t[0],t[0],t[0],t[0],1];break;case 2:t=[t[1],t[0],t[1],t[0],t[0],t[1],1];break;case 3:t=[t[1],t[0],t[1],t[0],t[0],t[1],t[2]];break;case 6:t=[t[0],t[1],t[2],t[3],t[4],t[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!function(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var r=0;r<7;r++)if(t[r]!==e[r])return!1;return!0}(this._spacing,t)&&(this._spacing=t,this._spacingVars)){for(var e=0;e<this._spacingVars.length;e++)this._spacingVars[e]&&this._solver.suggestValue(this._spacingVars[e],this._spacing[e]);this._solver.updateVariables()}return this}addConstraint(t){return F.call(this,t),this._solver.updateVariables(),this}addConstraints(t){for(var e=0;e<t.length;e++)F.call(this,t[e]);return this._solver.updateVariables(),this}get subViews(){return this._subViews}};r.d(e,"Attribute",function(){return i}),r.d(e,"Relation",function(){return n}),r.d(e,"Priority",function(){return o}),r.d(e,"VisualFormat",function(){return v}),r.d(e,"View",function(){return D}),r.d(e,"SubView",function(){return M})}])});
//# sourceMappingURL=autolayout.js.map